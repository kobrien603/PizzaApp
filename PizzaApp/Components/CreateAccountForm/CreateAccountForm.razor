@namespace PizzaApp.Components
@using System.ComponentModel.DataAnnotations

<MudGrid>
    <MudItem xs="12">
        <EditForm @ref="MudForm" OnValidSubmit="CreateAccount" Model="User">
            <DataAnnotationsValidator/>
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" 
                        Label="First Name" 
                        @bind-Value="User.FirstName"
                        For="@(() => User.FirstName)"
                    />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" 
                        Label="Last Name" 
                        @bind-Value="User.LastName"
                        For="@(() => User.LastName)"
                    />
                </MudItem>
            </MudGrid>

            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" 
                        Label="Email" 
                        @bind-Value="User.Email"
                        For="@(() => User.Email)"
                    />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudDatePicker Label="Date of Birth" 
                        @bind-Date="User.DateOfBirth"
                        For="@(() => User.DateOfBirth)"
                    />
                </MudItem>
            </MudGrid>

            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudTextField @ref="Password" 
                        T="string"
                        Label="Password"
                        @bind-Value="User.Password"
                        For="@(() => User.Password)"
                        InputType="InputType.Password"
                        Validation="@(new Func<string, IEnumerable<string>>(PasswordStrength))" 
                        Required="true"
                        RequiredError="Password is required!" 
                    />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string"
                        Label="Confirm Password"
                        InputType="InputType.Password"
                        Validation="@(new Func<string, string>(PasswordMatch))" 
                    />
                </MudItem>
            </MudGrid>
            
            <MudButton Disabled="@BtnCreateAccount" ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">
                @if (BtnCreateAccount)
                {
                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
                    <MudText Class="ms-2">Processing</MudText>
                }
                else
                {
                    <MudText>Click me</MudText>
                }
            </MudButton>
        </EditForm>
    </MudItem>
</MudGrid>